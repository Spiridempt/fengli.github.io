{"sha":"96e0902ae0248942a07da130058537baf4048391","commit":{"author":{"name":"Magnus Ernstsson","email":"magnus@ernstsson.net","date":"2016-12-19T10:08:48Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2016-12-19T10:08:48Z"},"message":"Replaced awkward testapp long click return with binding adapter (#125)","tree":{"sha":"e1ea3be1192200ae07c1fa18d6b5f87f733e5e42","url":"https://api.github.com/repos/google/agera/git/trees/e1ea3be1192200ae07c1fa18d6b5f87f733e5e42"},"url":"https://api.github.com/repos/google/agera/git/commits/96e0902ae0248942a07da130058537baf4048391","comment_count":0},"url":"https://api.github.com/repos/google/agera/commits/96e0902ae0248942a07da130058537baf4048391","html_url":"https://github.com/google/agera/commit/96e0902ae0248942a07da130058537baf4048391","comments_url":"https://api.github.com/repos/google/agera/commits/96e0902ae0248942a07da130058537baf4048391/comments","author":{"login":"ernstsson","id":378389,"avatar_url":"https://avatars2.githubusercontent.com/u/378389?v=3","gravatar_id":"","url":"https://api.github.com/users/ernstsson","html_url":"https://github.com/ernstsson","followers_url":"https://api.github.com/users/ernstsson/followers","following_url":"https://api.github.com/users/ernstsson/following{/other_user}","gists_url":"https://api.github.com/users/ernstsson/gists{/gist_id}","starred_url":"https://api.github.com/users/ernstsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ernstsson/subscriptions","organizations_url":"https://api.github.com/users/ernstsson/orgs","repos_url":"https://api.github.com/users/ernstsson/repos","events_url":"https://api.github.com/users/ernstsson/events{/privacy}","received_events_url":"https://api.github.com/users/ernstsson/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"avatar_url":"https://avatars0.githubusercontent.com/u/19864447?v=3","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"b2a3b264ea95dc47d5bda490cc0dad48dfa22dc1","url":"https://api.github.com/repos/google/agera/commits/b2a3b264ea95dc47d5bda490cc0dad48dfa22dc1","html_url":"https://github.com/google/agera/commit/b2a3b264ea95dc47d5bda490cc0dad48dfa22dc1"}],"stats":{"total":48,"additions":41,"deletions":7},"files":[{"sha":"9653560a5eb0144aa4b83a57f8fa0581c250113d","filename":"testapp/src/main/java/com/google/android/agera/testapp/BindingAdapters.java","status":"added","additions":35,"deletions":0,"changes":35,"blob_url":"https://github.com/google/agera/blob/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/java/com/google/android/agera/testapp/BindingAdapters.java","raw_url":"https://github.com/google/agera/raw/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/java/com/google/android/agera/testapp/BindingAdapters.java","contents_url":"https://api.github.com/repos/google/agera/contents/testapp/src/main/java/com/google/android/agera/testapp/BindingAdapters.java?ref=96e0902ae0248942a07da130058537baf4048391","patch":"@@ -0,0 +1,35 @@\n+/*\n+ * Copyright 2016 Google Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.android.agera.testapp;\n+\n+import android.databinding.BindingAdapter;\n+import android.support.annotation.NonNull;\n+import android.view.View;\n+import android.view.View.OnClickListener;\n+\n+public final class BindingAdapters {\n+\n+  @BindingAdapter({\"bind:onLongClick\"})\n+  public static void onLongClick(@NonNull final View view,\n+      @NonNull final OnClickListener onClickListener) {\n+    view.setOnLongClickListener(clickView -> {\n+      onClickListener.onClick(clickView);\n+      return true;\n+    });\n+  }\n+\n+  private BindingAdapters() {}\n+}"},{"sha":"4fe19c4f3886a966f80b57a5440acce91d7cbc20","filename":"testapp/src/main/java/com/google/android/agera/testapp/NotesFragment.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/google/agera/blob/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/java/com/google/android/agera/testapp/NotesFragment.java","raw_url":"https://github.com/google/agera/raw/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/java/com/google/android/agera/testapp/NotesFragment.java","contents_url":"https://api.github.com/repos/google/agera/contents/testapp/src/main/java/com/google/android/agera/testapp/NotesFragment.java?ref=96e0902ae0248942a07da130058537baf4048391","patch":"@@ -106,8 +106,7 @@ public View onCreateView(final LayoutInflater inflater, @Nullable final ViewGrou\n                           (d, i) -> notesStore.updateNote(note, editText.getText().toString()))\n                       .create().show();\n                 })\n-            .handler(BR.longClick,\n-                (Predicate<Note>) notesStore::deleteNote)\n+            .handler(BR.longClick, (Receiver<Note>) notesStore::deleteNote)\n             .forList())\n         .build();\n     adapter.setHasStableIds(true);"},{"sha":"69473eccbe608dc35beacab394190e9b1c66e716","filename":"testapp/src/main/java/com/google/android/agera/testapp/NotesStore.java","status":"modified","additions":1,"deletions":2,"changes":3,"blob_url":"https://github.com/google/agera/blob/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/java/com/google/android/agera/testapp/NotesStore.java","raw_url":"https://github.com/google/agera/raw/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/java/com/google/android/agera/testapp/NotesStore.java","contents_url":"https://api.github.com/repos/google/agera/contents/testapp/src/main/java/com/google/android/agera/testapp/NotesStore.java?ref=96e0902ae0248942a07da130058537baf4048391","patch":"@@ -168,13 +168,12 @@ public void insertNoteFromText(@NonNull final String noteText) {\n         .compile());\n   }\n \n-  public boolean deleteNote(@NonNull final Note note) {\n+  public void deleteNote(@NonNull final Note note) {\n     writeRequestReceiver.accept(sqlDeleteRequest()\n         .table(NOTES_TABLE)\n         .where(MODIFY_NOTE_WHERE)\n         .arguments(String.valueOf(note.getId()))\n         .compile());\n-    return true;\n   }\n \n   public void updateNote(@NonNull final Note note, @NonNull final String noteText) {"},{"sha":"45f8a9a4a49d283c77e1a329c82eb3303c24af07","filename":"testapp/src/main/res/layout/text_layout.xml","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/google/agera/blob/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/res/layout/text_layout.xml","raw_url":"https://github.com/google/agera/raw/96e0902ae0248942a07da130058537baf4048391/testapp/src/main/res/layout/text_layout.xml","contents_url":"https://api.github.com/repos/google/agera/contents/testapp/src/main/res/layout/text_layout.xml?ref=96e0902ae0248942a07da130058537baf4048391","patch":"@@ -14,11 +14,12 @@\n   ~ See the License for the specific language governing permissions and\n   ~ limitations under the License.\n   -->\n-<layout xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\n   <data>\n     <variable name=\"note\" type=\"com.google.android.agera.testapp.Note\"/>\n     <variable name=\"click\" type=\"com.google.android.agera.Receiver\"/>\n-    <variable name=\"longClick\" type=\"com.google.android.agera.Predicate\"/>\n+    <variable name=\"longClick\" type=\"com.google.android.agera.Receiver\"/>\n   </data>\n   <TextView\n       android:layout_width=\"match_parent\"\n@@ -29,7 +30,7 @@\n       android:background=\"#F7E4EE\"\n       android:elevation=\"2dp\"\n       android:onClick=\"@{(view) -> click.accept(note)}\"\n-      android:onLongClick=\"@{(view) -> longClick.apply(note)}\"\n+      app:onLongClick=\"@{(view) -> longClick.accept(note)}\"\n       android:padding=\"8dp\"\n       android:text=\"@{note.note}\"\n       android:textSize=\"20sp\"/>"}]}