{"sha":"eb8999e834ffec432bcad54bfeaaa77d080c2fc5","commit":{"author":{"name":"Magnus Ernstsson","email":"magnus@ernstsson.net","date":"2016-06-04T13:25:38Z"},"committer":{"name":"Magnus Ernstsson","email":"magnus@ernstsson.net","date":"2016-06-04T13:25:38Z"},"message":"Changed sort not to mutate input list (#78)","tree":{"sha":"1197cdec818f2790e05fbc0bce9231c17270bcb0","url":"https://api.github.com/repos/google/agera/git/trees/1197cdec818f2790e05fbc0bce9231c17270bcb0"},"url":"https://api.github.com/repos/google/agera/git/commits/eb8999e834ffec432bcad54bfeaaa77d080c2fc5","comment_count":0},"url":"https://api.github.com/repos/google/agera/commits/eb8999e834ffec432bcad54bfeaaa77d080c2fc5","html_url":"https://github.com/google/agera/commit/eb8999e834ffec432bcad54bfeaaa77d080c2fc5","comments_url":"https://api.github.com/repos/google/agera/commits/eb8999e834ffec432bcad54bfeaaa77d080c2fc5/comments","author":{"login":"ernstsson","id":378389,"avatar_url":"https://avatars2.githubusercontent.com/u/378389?v=3","gravatar_id":"","url":"https://api.github.com/users/ernstsson","html_url":"https://github.com/ernstsson","followers_url":"https://api.github.com/users/ernstsson/followers","following_url":"https://api.github.com/users/ernstsson/following{/other_user}","gists_url":"https://api.github.com/users/ernstsson/gists{/gist_id}","starred_url":"https://api.github.com/users/ernstsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ernstsson/subscriptions","organizations_url":"https://api.github.com/users/ernstsson/orgs","repos_url":"https://api.github.com/users/ernstsson/repos","events_url":"https://api.github.com/users/ernstsson/events{/privacy}","received_events_url":"https://api.github.com/users/ernstsson/received_events","type":"User","site_admin":false},"committer":{"login":"ernstsson","id":378389,"avatar_url":"https://avatars2.githubusercontent.com/u/378389?v=3","gravatar_id":"","url":"https://api.github.com/users/ernstsson","html_url":"https://github.com/ernstsson","followers_url":"https://api.github.com/users/ernstsson/followers","following_url":"https://api.github.com/users/ernstsson/following{/other_user}","gists_url":"https://api.github.com/users/ernstsson/gists{/gist_id}","starred_url":"https://api.github.com/users/ernstsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ernstsson/subscriptions","organizations_url":"https://api.github.com/users/ernstsson/orgs","repos_url":"https://api.github.com/users/ernstsson/repos","events_url":"https://api.github.com/users/ernstsson/events{/privacy}","received_events_url":"https://api.github.com/users/ernstsson/received_events","type":"User","site_admin":false},"parents":[{"sha":"8c0cb91f15d6d0d4ec83ad6cc707abe76a802866","url":"https://api.github.com/repos/google/agera/commits/8c0cb91f15d6d0d4ec83ad6cc707abe76a802866","html_url":"https://github.com/google/agera/commit/8c0cb91f15d6d0d4ec83ad6cc707abe76a802866"}],"stats":{"total":23,"additions":20,"deletions":3},"files":[{"sha":"88aaf4cc8e72a430f45df42963dfe49f220d2031","filename":"agera/src/main/java/com/google/android/agera/FunctionCompiler.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/google/agera/blob/eb8999e834ffec432bcad54bfeaaa77d080c2fc5/agera/src/main/java/com/google/android/agera/FunctionCompiler.java","raw_url":"https://github.com/google/agera/raw/eb8999e834ffec432bcad54bfeaaa77d080c2fc5/agera/src/main/java/com/google/android/agera/FunctionCompiler.java","contents_url":"https://api.github.com/repos/google/agera/contents/agera/src/main/java/com/google/android/agera/FunctionCompiler.java?ref=eb8999e834ffec432bcad54bfeaaa77d080c2fc5","patch":"@@ -237,8 +237,9 @@ public Object apply(@NonNull final Object input) {\n     @NonNull\n     @Override\n     public List<T> apply(@NonNull final List<T> input) {\n-      Collections.sort(input, comparator);\n-      return input;\n+      final List<T> output = new ArrayList<>(input);\n+      Collections.sort(output, comparator);\n+      return output;\n     }\n   }\n }"},{"sha":"79989ced21d00c9d088baf6a7000f96b195db7ed","filename":"agera/src/test/java/com/google/android/agera/FunctionsTest.java","status":"modified","additions":17,"deletions":1,"changes":18,"blob_url":"https://github.com/google/agera/blob/eb8999e834ffec432bcad54bfeaaa77d080c2fc5/agera/src/test/java/com/google/android/agera/FunctionsTest.java","raw_url":"https://github.com/google/agera/raw/eb8999e834ffec432bcad54bfeaaa77d080c2fc5/agera/src/test/java/com/google/android/agera/FunctionsTest.java","contents_url":"https://api.github.com/repos/google/agera/contents/agera/src/test/java/com/google/android/agera/FunctionsTest.java?ref=eb8999e834ffec432bcad54bfeaaa77d080c2fc5","patch":"@@ -185,7 +185,23 @@ public int compare(Integer lhs, Integer rhs) {\n               }\n             });\n \n-    assertThat(function.apply(INPUT_LIST), contains(3, 4, 7, 7));\n+    final List<String> inputList = new ArrayList<>(INPUT_LIST);\n+    assertThat(function.apply(inputList), contains(3, 4, 7, 7));\n+  }\n+\n+  @Test\n+  public void shouldNotMutateInputListWhenSorting() {\n+    final Function<List<String>, List<String>> function = functionFromListOf(String.class)\n+        .thenSort(new Comparator<String>() {\n+          @Override\n+          public int compare(String lhs, String rhs) {\n+            return lhs.compareTo(rhs);\n+          }\n+        });\n+\n+    final List<String> inputList = new ArrayList<>(INPUT_LIST);\n+    assertThat(function.apply(inputList), contains(\"for\", \"some\", \"strings\", \"testing\"));\n+    assertThat(inputList, is(INPUT_LIST));\n   }\n \n   @Test"}]}